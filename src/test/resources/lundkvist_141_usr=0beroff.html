<html lang="sv"><head><title>Visa zoner i kommuner</title><style type="text/css">
label {
    font: normal 12px arial !important;
}
a {
    font: normal 12px arial !important;
}
div.info {
    font: normal 12px arial !important;
    margin-top: 6px;
    margin-bottom: 6px;
    margin-left: 10px;
}
div.error {
    font: normal 12px arial !important;
    margin-top: 6px;
    margin-bottom: 6px;
    margin-left: 10px;
    color: red;
}

tr.takenZone td {
    background-color: #b3ffb3; color: black;
}
option.allZones {
    background-color: yellow; color: black;
}
option.allZonesLost {
    background-color: DarkOrange; color: black;
}
option.noZones {
    background-color: #ffaaaa; color: black;
}

#list {
    display:inline-block;
    float:left;
    padding-right:20px;
    height: 100%;
    width: 480px;
    overflow-x: visible;
    overflow-y: auto;
}

#map {
    margin-left:500px;
    height: 100%;
    position:fixed;
}
</style>
<meta http-equiv="content-language" content="sv">
<link rel="stylesheet" href="/css/theme.default.css">
<!-- load jQuery and tablesorter scripts -->
<script type="text/javascript" src="/script/jquery-1.12.0.min.js"></script>
<script type="text/javascript" src="/script/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/script/jquery.tablesorter.widgets.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/image/favicon-16x16.png">

</head>
<body>

<div id="list">
<form name="mainform" action="" method="GET">
<div class='info'><a href='https://turf.lundkvist.com/en/'>English</a><br>
</div><table><tr><td><label>Turfare:</label></td>
<td rowspan='2' style='vertical-align:bottom'><div id='medal'></div></td>
</tr>
<tr><td><input type='text' id=user name=user value=''></td>
</tr></table>
&nbsp;<select name=country id=country onchange='countryChanged()'><option value='0' >Välj land eller typ</option><option value='#' >Världen</option><option value='se' selected>Sverige</option><option value='dk' >Danmark</option><option value='fi' >Finland</option><option value='no' >Norge</option><option value='is' >Island</option><option value='nl' >Nederländerna</option><option value='gb' >Storbritannien</option><option value='de' >Tyskland</option><option value='kr' >Sydkorea</option><option value='us' >USA</option><option value='jp' >Japan</option><option value='SP23' >Bergstoppar</option><option value='SP08' >Broar</option><option value='SP22' >Nationalparker</option><option value='SP09' >Heliga zoner</option><option value='SP13' >Järnvägsstationer</option><option value='SP21' >Monument</option><option value='SP16' >Ruin</option><option value='SP14' >Slott</option><option value='SP03' >Vattenzoner</option><option value='SP06' >Vinnarzoner</option><option value='SP15' >Världsarv</option><option value='ESK' >En Skånsk Klassiker</option><option value='VBK' >Västerbottens Turf-klassiker</option><option value='FTT' >Aldrig tagna</option></select>
<br>
<div class='info'></div>
&nbsp;<select name=region id=region onchange='regionChanged()'>
<option value='0'>Välj region</option>
<option value='136'  >Blekinge (828)</option>
<option value='129'  >Dalarna (2105)</option>
<option value='138'  >Gotland (355)</option>
<option value='144'  >Gävleborg (1579)</option>
<option value='134'  >Halland (1292)</option>
<option value='128'  >Jämtland (1033)</option>
<option value='133'  >Jönköping (1976)</option>
<option value='137'  >Kalmar (1748)</option>
<option value='147'  >Kronoberg (1057)</option>
<option value='126'  >Norrbotten (1561)</option>
<option value='135'  >Skåne (4797)</option>
<option value='141' selected >Stockholm (6136)</option>
<option value='140'  >Södermanland (1573)</option>
<option value='142'  >Uppsala (1885)</option>
<option value='130'  >Värmland (2073)</option>
<option value='127'  >Västerbotten (1959)</option>
<option value='145'  >Västernorrland (1239)</option>
<option value='143'  >Västmanland (1879)</option>
<option value='132'  >Västra Götaland (6431)</option>
<option value='131'  >Örebro (1914)</option>
<option value='139'  >Östergötland (1989)</option>
</select>
&nbsp;&nbsp;
<select name=city id=city onchange='this.form.submit()'>
<option value='0'>Välj kommun/area</option>
<option value='#ALLA#' >Alla kommuner</option>
<option value='#ORANGE#' >Orange kommuner</option>
<option value='#EJGUL#' >Ej tidigare gul</option>
<option value='Botkyrka'  >Botkyrka (227)</option>
<option value='Danderyd'  >Danderyd (155)</option>
<option value='Ekerö'  >Ekerö (132)</option>
<option value='Haninge'  >Haninge (286)</option>
<option value='Huddinge'  >Huddinge (356)</option>
<option value='Järfälla'  >Järfälla (276)</option>
<option value='Lidingö'  >Lidingö (139)</option>
<option value='Nacka'  >Nacka (361)</option>
<option value='Norrtälje'  >Norrtälje (218)</option>
<option value='Nykvarn'  >Nykvarn (83)</option>
<option value='Nynäshamn'  >Nynäshamn (131)</option>
<option value='Salem'  >Salem (90)</option>
<option value='Sigtuna'  >Sigtuna (148)</option>
<option value='Sollentuna'  >Sollentuna (238)</option>
<option value='Solna'  >Solna (219)</option>
<option value='Stockholm'  >Stockholm (1468)</option>
<option value='Sundbyberg'  >Sundbyberg (113)</option>
<option value='Södertälje'  >Södertälje (317)</option>
<option value='Tyresö'  >Tyresö (193)</option>
<option value='Täby'  >Täby (230)</option>
<option value='Upplands Väsby'  >Upplands Väsby (130)</option>
<option value='Upplands-Bro'  >Upplands-Bro (139)</option>
<option value='Vallentuna'  >Vallentuna (116)</option>
<option value='Vaxholm'  >Vaxholm (91)</option>
<option value='Värmdö'  >Värmdö (144)</option>
<option value='Österåker'  >Österåker (136)</option>
</select><div class='info'><a href='help.php' target='#MyHelp#'>Hjälp&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='List.php' target='#List#'>Sammanställning&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='ListRegions.php' target='#RegList#'>Regionslista&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='ListRegions2.php' target='#RegList#'>Kommunlista&nbsp;</a></div>
<div class='info'><a href='EskList.php' target='#EskList#'>En Skånsk Klassiker&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='EskList2.php' target='#EskList#'>Klassikerzoner&nbsp;</a></div>
<div class='info'><a href='VbkList.php' target='#VbkList#'>Västerbottens Turf-klassiker&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='VbkList2.php' target='#VbkList#'>VBK-zoner&nbsp;</a></div>
<div class='info'><a href='TopList7Hills.php' target='#ShChallenge#'>7 Hills of Edinburgh challenge&nbsp;</a></div>
<div class='info'><a href='MyStats.php' target='#MyStats#'>Min statistik</a>&nbsp;&nbsp;<a href='AssistTurf.php' target='#AssistTurf#'>Assistturf</a></div>
<div class='info'><a href='TopListCities.php' target='#TopListCities#'>Topplista kommuner</a>&nbsp;&nbsp;<a href='TopListYellow.php' target='#TopListYellow#'>Topplista gula</a>&nbsp;&nbsp;<a href='TopListFtt.php' target='#FttList#'>Topplista FTT</a></div>
<div class='info'><input name=showMe id=showMe  type='checkbox' onclick='setIAmHere(this)' checked>Jag är här&nbsp;&nbsp;</div>
<div><table id='zoneTable' class='tablesorter'><thead><tr><th>Zon</th><th>Typ</th><th style='text-align:right'>tp</th><th style='text-align:right'>pph</th><th style='text-align:right'>Tagningar</th></tr><tr><th class='sorter-false'>Summa</th><th class='sorter-false'>&nbsp;</th><th class='sorter-false' style='text-align:right'></th><th class='sorter-false' style='text-align:right'></th><th class='sorter-false' style='text-align:right'></th></tr></thead>
<tbody></tbody></table></div>
</form>
</div>

<div id="map"></div>
<script type = "text/javascript" charset = "utf-8" > 

var map;

var markers = [];
var iAmHereMarker;

var bikesShown = false;
var bikeLayer;

function countryChanged() {
    var regionSelect = document.getElementById('region');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    regionSelect = document.getElementById('countrySP');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    regionChanged();
}

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(setCurrentLocation);
    } else {
        alert( "Geolocation is not supported by this browser.");
    }
}
function setCurrentLocation(position) {
    iAmHereMarker = new google.maps.Marker({
        icon: '/image/currentlocation3.png', 
        position: {lat: position.coords.latitude, lng: position.coords.longitude}, 
        map: map, 
        visible: true,
        title: 'Här är du',
    });
}

function regionChanged() {
    var citySelect = document.getElementById('city');
    if (citySelect != null)
        citySelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function fttCountryChanged() {
    var regionSelect = document.getElementById('regionFTT');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function continentChanged() {
    var ccSelect = document.getElementById('countryContinent');
    if (ccSelect != null)
        ccSelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function submitForm() {
    document.forms["mainform"].submit();
}

function BikeControl(controlDiv, map) {
    controlDiv.style.padding = '5px';
    var controlUI = document.createElement('div');
    controlUI.style.backgroundColor = 'GhostWhite';
    controlUI.style.border='1px solid';
    controlUI.style.cursor = 'pointer';
    controlUI.style.textAlign = 'center';
    controlUI.title = 'Cykelbanor';
    controlDiv.appendChild(controlUI);
    var controlText = document.createElement('div');
    controlText.style.fontFamily='Arial,sans-serif';
    controlText.style.fontSize='12px';
    controlText.style.paddingLeft = '4px';
    controlText.style.paddingRight = '4px';
    controlText.style.paddingTop = '4px';
    controlText.style.paddingBottom = '4px';
    controlText.innerHTML = '<b>Cykelbanor<b>'
    controlUI.appendChild(controlText);

    // Setup click-event listener
    google.maps.event.addDomListener(controlUI, 'click', function() {
    if (bikeLayer == null)
        bikeLayer = new google.maps.BicyclingLayer();
    if (bikesShown)
        bikeLayer.setMap(null);
    else
        bikeLayer.setMap(map);
    bikesShown = !bikesShown;
  });
}

 
function initMap() {
//sql= SELECT Min(Longitude) + ((Max(Longitude) - Min(Longitude))/2), Min(Latitude) + ((Max(Latitude) - Min(Latitude))/2)  FROM Zones  WHERE RegionId = ?  AND City = ? 
var myLatLng = {lat: 0, lng: 0};
map = new google.maps.Map(document.getElementById('map'), {zoom: 12,center: myLatLng});
var bounds = new google.maps.LatLngBounds();
getLocation();
bounds.extend(new google.maps.LatLng(-1, -1));
bounds.extend(new google.maps.LatLng(-1, 1));
bounds.extend(new google.maps.LatLng(1, -1));
bounds.extend(new google.maps.LatLng(-1, -1));
    // Don't zoom in too far on only one marker
    if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
       var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
       var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
       bounds.extend(extendPoint1);
       bounds.extend(extendPoint2);
    }
map.fitBounds(bounds);
var bikeControlDiv = document.createElement('div');
var bikeControl = new BikeControl(bikeControlDiv, map);
map.controls[google.maps.ControlPosition.RIGHT_TOP].push(bikeControlDiv);

}

function setMedal(country) {
    var elem = document.createElement("img");
    elem.src = "/image/" +  country + "Explorer.png";
    elem.setAttribute("height", "30");
    elem.setAttribute("width", "30");
    elem.setAttribute("alt", "Explorer medal");
    document.getElementById("medal").appendChild(elem);
}

function findMarker(name) {
    for (var i = 0; i < markers.length; i++) {
        if ($(markers[i]).data().name == name)
            return markers[i];
    }
    return null;
}

function setMarkers(cb,  color)
{
    for (var i = 0; i < markers.length; i++) {
        if ($(markers[i]).data().color == color)
            markers[i].setVisible(cb.checked);
    }
}

function setIAmHere(cb)
{
    if (iAmHereMarker)
        iAmHereMarker.setVisible(cb.checked);
}

$(function(){
    $.tablesorter.addWidget({
        id: "hover",
        format: function(table) {
            $('tr',$(table)).mouseover(function () {
                zoneName = this.cells["0"].textContent;
                marker = findMarker(zoneName);
                if (marker == null)
                    return;
                marker.setIcon('/image/currentlocation2.png');
            }).mouseout(function () {
                zoneName = this.cells["0"].textContent;
                marker = findMarker(zoneName);
                if (marker == null)
                    return;
                icon = $(marker).data().imgURL;
                marker.setIcon(icon);
            });
        }
    });
    
    
    $("#zoneTable").tablesorter({
        widgets: ["stickyHeaders", "hover"],
        widgetOptions : {
          // css class name applied to the sticky header
          stickyHeaders : "tablesorter-stickyHeader"
        }
    });
    
});

</script >
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGBae8LUZmyGD6x9f0eYMcNUUR0UmJpME&callback=initMap"></script>
</body></html>
