<html lang="sv"><head><title>Visa zoner i kommuner</title><style type="text/css">
label {
    font: normal 12px arial !important;
}
a {
    font: normal 12px arial !important;
}
div.info {
    font: normal 12px arial !important;
    margin-top: 6px;
    margin-bottom: 6px;
    margin-left: 10px;
}
div.error {
    font: normal 12px arial !important;
    margin-top: 6px;
    margin-bottom: 6px;
    margin-left: 10px;
    color: red;
}

tr.takenZone td {
    background-color: #b3ffb3; color: black;
}
option.allZones {
    background-color: yellow; color: black;
}
option.allZonesLost {
    background-color: DarkOrange; color: black;
}
option.noZones {
    background-color: #ffaaaa; color: black;
}

#list {
    display:inline-block;
    float:left;
    padding-right:20px;
    height: 100%;
    width: 480px;
    overflow-x: visible;
    overflow-y: auto;
}

#map {
    margin-left:500px;
    height: 100%;
    position:fixed;
}
</style>
<meta http-equiv="content-language" content="sv">
<link rel="stylesheet" href="/css/theme.default.css">
<!-- load jQuery and tablesorter scripts -->
<script type="text/javascript" src="/script/jquery-1.12.0.min.js"></script>
<script type="text/javascript" src="/script/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="/script/jquery.tablesorter.widgets.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/image/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/image/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/image/favicon-16x16.png">

</head>
<body>

<div id="list">
<form name="mainform" action="" method="GET">
<table><tr><td><label>Turfare:</label></td>
<td rowspan='2' style='vertical-align:bottom'><div id='medal'></div></td>
</tr>
<tr><td><input type='text' id=user name=user value='0beroff'></td>
</tr></table>
<div class='info'>Tagit 3789 av 91749 zoner och 25 av 323 regioner.<br>
</div>&nbsp;<select name=country id=country onchange='countryChanged()'><option value='0' >Välj land eller typ</option><option value='#ALLA#' >Alla mina</option><option value='#' >Världen</option><option value='se' selected>Sverige</option><option value='dk' >Danmark</option><option value='fi' >Finland</option><option value='no' >Norge</option><option value='is' >Island</option><option value='nl' >Nederländerna</option><option value='gb' >Storbritannien</option><option value='de' >Tyskland</option><option value='kr' >Sydkorea</option><option value='us' >USA</option><option value='jp' >Japan</option><option value='SP23' >Bergstoppar</option><option value='SP08' >Broar</option><option value='SP22' >Nationalparker</option><option value='SP09' >Heliga zoner</option><option value='SP13' >Järnvägsstationer</option><option value='SP21' >Monument</option><option value='SP16' >Ruin</option><option value='SP14' >Slott</option><option value='SP03' >Vattenzoner</option><option value='SP06' >Vinnarzoner</option><option value='SP15' >Världsarv</option><option value='ESK' >En Skånsk Klassiker</option><option value='VBK' >Västerbottens Turf-klassiker</option><option value='FTT' >Aldrig tagna</option></select>
&nbsp;<a href='Kommunkarta.php?id=80119&country=se' target='#KommunKarta#'>Visa kommunkarta</a><br>
<div class='info'>Tagit 3778 zoner av 38952 i 159 av 290 kommuner och 21 av 21 regioner.</div>
&nbsp;<select name=region id=region onchange='regionChanged()'>
<option value='0'>Välj region</option>
<option value='136'  >Blekinge (5 / 687 / 1%)</option>
<option value='129'  >Dalarna (8 / 1778 / 0%)</option>
<option value='138'  >Gotland (35 / 325 / 11%)</option>
<option value='144'  >Gävleborg (19 / 1338 / 1%)</option>
<option value='134'  >Halland (1 / 1069 / 0%)</option>
<option value='128'  >Jämtland (7 / 874 / 1%)</option>
<option value='133'  >Jönköping (4 / 1723 / 0%)</option>
<option value='137'  >Kalmar (26 / 1519 / 2%)</option>
<option value='147'  >Kronoberg (6 / 883 / 1%)</option>
<option value='126'  >Norrbotten (2 / 1342 / 0%)</option>
<option value='135'  >Skåne (22 / 3867 / 1%)</option>
<option value='141' selected >Stockholm (3162 / 5370 / 59%)</option>
<option value='140'  >Södermanland (10 / 1383 / 1%)</option>
<option value='142'  >Uppsala (62 / 1700 / 4%)</option>
<option value='130'  >Värmland (9 / 1784 / 1%)</option>
<option value='127'  >Västerbotten (165 / 1768 / 9%)</option>
<option value='145'  >Västernorrland (13 / 1037 / 1%)</option>
<option value='143'  >Västmanland (37 / 1743 / 2%)</option>
<option value='132'  >Västra Götaland (160 / 5326 / 3%)</option>
<option value='131'  >Örebro (18 / 1699 / 1%)</option>
<option value='139'  >Östergötland (7 / 1737 / 0%)</option>
</select>
&nbsp;&nbsp;
<select name=city id=city onchange='this.form.submit()'>
<option value='0'>Välj kommun/area</option>
<option value='#ALLA#' >Alla kommuner</option>
<option value='#ORANGE#' >Orange kommuner</option>
<option value='Botkyrka'  >Botkyrka (16 / 189 / 8%)</option>
<option value='Danderyd'  class='allZones'>Danderyd (130 / 130 / 100%)</option>
<option value='Ekerö'  >Ekerö (69 / 105 / 66%)</option>
<option value='Haninge'  >Haninge (17 / 238 / 7%)</option>
<option value='Huddinge'  >Huddinge (140 / 309 / 45%)</option>
<option value='Järfälla'  class='allZones'>Järfälla (250 / 250 / 100%)</option>
<option value='Lidingö'  class='allZonesLost'>Lidingö (122 / 127 / 96%)</option>
<option value='Nacka'  >Nacka (68 / 311 / 22%)</option>
<option value='Norrtälje'  >Norrtälje (1 / 169 / 1%)</option>
<option value='Nykvarn'  >Nykvarn (1 / 55 / 2%)</option>
<option value='Nynäshamn'  >Nynäshamn (4 / 106 / 4%)</option>
<option value='Salem'  >Salem (1 / 74 / 1%)</option>
<option value='Sigtuna'  >Sigtuna (21 / 131 / 16%)</option>
<option value='Sollentuna'  class='allZones'>Sollentuna (209 / 209 / 100%)</option>
<option value='Solna'  class='allZones'>Solna (205 / 205 / 100%)</option>
<option value='Stockholm'  class='allZonesLost'>Stockholm (1414 / 1415 / 100%)</option>
<option value='Sundbyberg'  class='allZones'>Sundbyberg (106 / 106 / 100%)</option>
<option value='Södertälje'  >Södertälje (2 / 261 / 1%)</option>
<option value='Tyresö'  >Tyresö (1 / 167 / 1%)</option>
<option value='Täby'  class='allZones'>Täby (190 / 190 / 100%)</option>
<option value='Upplands Väsby'  class='allZones'>Upplands Väsby (115 / 115 / 100%)</option>
<option value='Upplands-Bro'  >Upplands-Bro (7 / 124 / 6%)</option>
<option value='Vallentuna'  >Vallentuna (59 / 88 / 67%)</option>
<option value='Vaxholm'  >Vaxholm (10 / 66 / 15%)</option>
<option value='Värmdö'  >Värmdö (1 / 120 / 1%)</option>
<option value='Österåker'  >Österåker (3 / 110 / 3%)</option>
</select><div class='info'>Tagit zoner i 26 av 26 kommuner, varav 7 kommuner där alla zoner är tagna.</div>
<div class='info'><a href='help.php' target='#MyHelp#'>Hjälp&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='List.php?user=0beroff' target='#List#'>Sammanställning&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='ListRegions.php?user=0beroff' target='#RegList#'>Regionslista&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='ListRegions2.php?user=0beroff' target='#RegList#'>Kommunlista&nbsp;</a></div>
<div class='info'><a href='EskList.php?user=0beroff' target='#EskList#'>En Skånsk Klassiker&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='EskList2.php' target='#EskList#'>Klassikerzoner&nbsp;</a></div>
<div class='info'><a href='VbkList.php?user=0beroff' target='#VbkList#'>Västerbottens Turf-klassiker&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='VbkList2.php' target='#VbkList#'>VBK-zoner&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='Landskarta.php?id=80119' target='#WorldMap#'>Världskarta&nbsp;</a></div>
<div class='info'><a href='TopList7Hills.php' target='#ShChallenge#'>7 Hills of Edinburgh challenge&nbsp;</a></div>
<div class='info'><a href='TopListCities.php' target='#TopListCities#'>Topplista kommuner</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href='MyStats.php?user=0beroff' target='#MyStats#'>Min statistik</a>&nbsp;&nbsp;<a href='AssistTurf.php' target='#AssistTurf#'>Assistturf</a>&nbsp;&nbsp;<a href='TopListFtt.php?user=0beroff' target='#FttList#'>Topplista FTT</a></div>
<div class='info'><input name=showTaken id='showTaken' type='checkbox' onclick='setMarkers(this, "green")' checked>Tagna&nbsp;&nbsp;<input name=showUntaken id=showUntaken  type='checkbox' onclick='setMarkers(this, "red")' checked>Otagna&nbsp;&nbsp;<input name=showMe id=showMe  type='checkbox' onclick='setIAmHere(this)' checked>Jag är här&nbsp;&nbsp;<a href='GetZonefile.php?user=0beroff&country=se&region=141&city=Linding%C3%B6&zones=alla'>Spara alla&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='GetZonefile.php?user=0beroff&country=se&region=141&city=Linding%C3%B6&zones=unika'>Spara tagna&nbsp;</a>&nbsp;&nbsp;&nbsp;<a href='GetZonefile.php?user=0beroff&country=se&region=141&city=Linding%C3%B6&zones=otagna'>Spara otagna&nbsp;</a>&nbsp;&nbsp;&nbsp;</div>
<div><table id='zoneTable' class='tablesorter'><thead><tr><th>Zon</th><th>Typ</th><th style='text-align:right'>tp</th><th style='text-align:right'>pph</th><th style='text-align:right'>Tagningar</th><th>Tagen</th></tr><tr><th class='sorter-false'>Summa</th><th class='sorter-false'>&nbsp;</th><th class='sorter-false' style='text-align:right'></th><th class='sorter-false' style='text-align:right'></th><th class='sorter-false' style='text-align:right'></th><th class='sorter-false'>&nbsp;</th></tr></thead>
<tbody></tbody></table></div>
</form>
</div>

<div id="map"></div>
<script type = "text/javascript" charset = "utf-8" > 

var map;

var markers = [];
var iAmHereMarker;

var bikesShown = false;
var bikeLayer;

function countryChanged() {
    var regionSelect = document.getElementById('region');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    regionSelect = document.getElementById('countrySP');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    regionChanged();
}

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(setCurrentLocation);
    } else {
        alert( "Geolocation is not supported by this browser.");
    }
}
function setCurrentLocation(position) {
    iAmHereMarker = new google.maps.Marker({
        icon: '/image/currentlocation3.png', 
        position: {lat: position.coords.latitude, lng: position.coords.longitude}, 
        map: map, 
        visible: true,
        title: 'Här är du', 
    });
}

function regionChanged() {
    var citySelect = document.getElementById('city');
    if (citySelect != null)
        citySelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function fttCountryChanged() {
    var regionSelect = document.getElementById('regionFTT');
    if (regionSelect != null)
        regionSelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function continentChanged() {
    var ccSelect = document.getElementById('countryContinent');
    if (ccSelect != null)
        ccSelect.selectedIndex = 0;
    document.forms["mainform"].submit();
}

function submitForm() {
    document.forms["mainform"].submit();
}

function BikeControl(controlDiv, map) {
    controlDiv.style.padding = '5px';
    var controlUI = document.createElement('div');
    controlUI.style.backgroundColor = 'GhostWhite';
    controlUI.style.border='1px solid';
    controlUI.style.cursor = 'pointer';
    controlUI.style.textAlign = 'center';
    controlUI.title = 'Cykelbanor';
    controlDiv.appendChild(controlUI);
    var controlText = document.createElement('div');
    controlText.style.fontFamily='Arial,sans-serif';
    controlText.style.fontSize='12px';
    controlText.style.paddingLeft = '4px';
    controlText.style.paddingRight = '4px';
    controlText.style.paddingTop = '4px';
    controlText.style.paddingBottom = '4px';
    controlText.innerHTML = '<b>Cykelbanor<b>'
    controlUI.appendChild(controlText);

    // Setup click-event listener
    google.maps.event.addDomListener(controlUI, 'click', function() {
    if (bikeLayer == null)
        bikeLayer = new google.maps.BicyclingLayer();
    if (bikesShown)
        bikeLayer.setMap(null);
    else
        bikeLayer.setMap(map);
    bikesShown = !bikesShown;
  });
}

 
function initMap() {
//sql= SELECT Min(Longitude) + ((Max(Longitude) - Min(Longitude))/2), Min(Latitude) + ((Max(Latitude) - Min(Latitude))/2)  FROM Zones  WHERE RegionId = ?  AND City = ? 
var myLatLng = {lat: 0, lng: 0};
map = new google.maps.Map(document.getElementById('map'), {zoom: 12,center: myLatLng});
var bounds = new google.maps.LatLngBounds();
getLocation();
bounds.extend(new google.maps.LatLng(-1, -1));
bounds.extend(new google.maps.LatLng(-1, 1));
bounds.extend(new google.maps.LatLng(1, -1));
bounds.extend(new google.maps.LatLng(-1, -1));
    // Don't zoom in too far on only one marker
    if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
       var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
       var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
       bounds.extend(extendPoint1);
       bounds.extend(extendPoint2);
    }
map.fitBounds(bounds);
var bikeControlDiv = document.createElement('div');
var bikeControl = new BikeControl(bikeControlDiv, map);
map.controls[google.maps.ControlPosition.RIGHT_TOP].push(bikeControlDiv);

}

function setMedal(country) {
    var elem = document.createElement("img");
    elem.src = "/image/" +  country + "Explorer.png";
    elem.setAttribute("height", "30");
    elem.setAttribute("width", "30");
    elem.setAttribute("alt", "Explorer medal");
    document.getElementById("medal").appendChild(elem);
}

function findMarker(name) {
    for (var i = 0; i < markers.length; i++) {
        if ($(markers[i]).data().name == name)
            return markers[i];
    }
    return null;
}

function setMarkers(cb,  color)
{
    for (var i = 0; i < markers.length; i++) {
        if ($(markers[i]).data().color == color)
            markers[i].setVisible(cb.checked);
    }
}

function setIAmHere(cb)
{
    if (iAmHereMarker)
        iAmHereMarker.setVisible(cb.checked);
}

$(function(){
    $.tablesorter.addWidget({
        id: "hover",
        format: function(table) {
            $('tr',$(table)).mouseover(function () {
                zoneName = this.cells["0"].textContent;
                marker = findMarker(zoneName);
                if (marker == null)
                    return;
                marker.setIcon('/image/currentlocation2.png');
            }).mouseout(function () {
                zoneName = this.cells["0"].textContent;
                marker = findMarker(zoneName);
                if (marker == null)
                    return;
                icon = $(marker).data().imgURL;
                marker.setIcon(icon);
            });
        }
    });
    
    
    $("#zoneTable").tablesorter({
        widgets: ["stickyHeaders", "hover"],
        widgetOptions : {
          // css class name applied to the sticky header
          stickyHeaders : "tablesorter-stickyHeader"
        }
    });
    
setMedal('se');});

</script >
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGBae8LUZmyGD6x9f0eYMcNUUR0UmJpME&callback=initMap"></script>
</body></html>
